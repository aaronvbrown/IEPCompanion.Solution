@{
  Layout = "_Layout";
}

@using IEPCompanion.Models;


<h1>IEP Home</h1>

<div>
@Html.ActionLink("Add IEP", "Create", "IEPs");
@Html.ActionLink("IEP Home", "Index", "IEPs");
<div>
@Html.ActionLink("Click if you're a parent", "ParentAuthTest", "Home");
@Html.ActionLink("Click if you're a admin or a teacher", "AdminTeacherAuthTest", "Home");

  @if(!User.Identity.IsAuthenticated)
  {
    @Html.ActionLink("Login", "Login", "Accounts")
    <br />
    @Html.ActionLink("Register", "Register", "Accounts")
  }
else {
  <h4>IEP Listing</h4>
  @if (Model["ieps"].Count == 0)
  {
    <p>No Individual Education Plans have been added yet!</p>
    <p>Click @Html.ActionLink("here", "Create", "IEPs") to add a new IEP</p>
  }
  else
  {
    <ul>
      @foreach (IEP IepInstance in Model["ieps"])
      {
        <li>@Html.ActionLink($"{IepInstance.IEPId}", "Details", "Home" , new { id = IepInstance.IEPId })</li>
      }
    </ul>
    }

  <h4>People Listing</h4>
  @if (Model["people"].Count == 0)
  {
    <p>No People added</p>
    <p>Click @Html.ActionLink("here", "Create", "Peoples") to add a new Person</p>
  }
  else
  {
    
      @foreach (Person person in Model["people"])
      {
        <li>@Html.ActionLink($"ID: {person.PersonId} {person.LastName}, {person.FirstName}", "Details", "Peoples" , new { id = person.PersonId })</li>
      }
  }
    <h4>Teachers</h4>
    <ul>
      @foreach (Person person in Model["people"])
      {
        @if (person.Role == "Teacher")
        {
          <li>@Html.ActionLink($"ID: {person.PersonId} {person.LastName}, {person.FirstName}", "Details", "Peoples" , new { id = person.PersonId })</li>
        }
      }
    </ul>
    <br>
    <h4>Students</h4>
    <ul>
      @foreach (Person person in Model["people"])
      {
        @if (person.Role == "Student")
        {
          <li>@Html.ActionLink($"ID: {person.PersonId} {person.LastName}, {person.FirstName}", "Details", "Peoples" , new { id = person.PersonId })</li>
        }
      }
    </ul>
    <br>
    <h4>Parents</h4>
    <ul>
      @foreach (Person person in Model["people"])
      {
        @if (person.Role == "Parent")
        {
          <li>@Html.ActionLink($"ID: {person.PersonId} {person.LastName}, {person.FirstName}", "Details", "Peoples" , new { id = person.PersonId })</li>
        }
      }
    </ul>
    <br>
    <h4>Administrators</h4>
    <ul>
      @foreach (Person person in Model["people"])
      {
        @if (person.Role == "Administrator")
        {
          <li>@Html.ActionLink($"ID: {person.PersonId} {person.LastName}, {person.FirstName}", "Details", "Peoples" , new { id = person.PersonId })</li>
        }
      }
    </ul>
    }
  

